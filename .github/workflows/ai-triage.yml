name: AI Issue Triage
on:
  issues:
    types: [opened]

jobs:
  triage:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Check Issue Context
        run: |
          echo "New issue opened: ${{ github.event.issue.title }}"

      - name: AI Classification
        uses: actions/ai-inference@v1
        id: classify
        with:
          model: 'gpt-4o-mini' 
          prompt: |
            Analyse this issue:
            Title: ${{ github.event.issue.title }}
            Body: ${{ github.event.issue.body }}
            
            Is this a 'Bug', 'Feature', or 'Question'? Respond with only one word.
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Print Classification
        run: echo "The AI thinks this is a ${{ steps.classify.outputs.response }}"